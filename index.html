<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Abrir Convite</title>

  <style>
    :root{
      /* POSIÇÃO DO SELO */
      --seal-x: 55%;
      --seal-y: 55%;

      /* TAMANHO base (influencia clique e arco) */
      --seal-size: min(36vw, 190px);

      /* ABRIR-CONVITE.PNG */
      --arc-drop: 46px;

      /* LOGO (preta) */
      --logo-size: min(26vw, 130px);
      --logo-right: 18px;
      --logo-bottom: 26px;
      /* mais alinhado no canto */


      --ease: cubic-bezier(.2,.9,.2,1);
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      overflow:hidden;
      background:#f3eee7;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      touch-action: manipulation;
      -webkit-text-size-adjust: 100%;
    }

    /* Blindagem base */
    html, body, .stage{
      user-select:none;
      -webkit-user-select:none;
      -ms-user-select:none;
    }
    img{ -webkit-user-drag:none; user-drag:none; }

    .stage{
      position:relative;
      width:100vw;
      height:100vh;
      opacity:1;
      will-change: opacity;
    }

    /* ✅ tudo que move junto (envelope + abrir-convite) */
    .scene{
      position:absolute;
      inset:0;
      z-index:1;
      transform: translateZ(0) scale(1.02);
      will-change: transform;
      backface-visibility:hidden;
      transform-style: preserve-3d;
    }

    .bg{
      position:absolute;
      inset:0;
      background: url("./envelope.png") center/cover no-repeat;
      z-index:1;
    }

    /* acabamento leve */
    .soft{
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(900px 700px at 50% 30%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%),
        linear-gradient(to bottom, rgba(0,0,0,.04), rgba(0,0,0,.10));
      opacity:.55;
      z-index:2;
    }

    /* Abrir convite */
    .arc{
      position:absolute;
      left: var(--seal-x);
      top:  var(--seal-y);
      transform: translate(-50%, -50%) translateY(var(--arc-drop));
      width: calc(var(--seal-size) * 1.65);
      max-width: 420px;
      height:auto;
      opacity:.98;
      pointer-events:none;
      z-index:3;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));
    }

    /* flash leve */
    .flash{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:0;
      z-index:4;
      background: radial-gradient(900px 700px at 50% 66%, rgba(255,255,255,.45), rgba(255,255,255,0) 60%);
    }

    /* ✅ Logo (preta), sem wrapper agora (já está recortada certinha) */
    .logo{
      position:absolute;
      right: calc(var(--logo-right) + env(safe-area-inset-right, 0px));
      bottom: calc(var(--logo-bottom) + env(safe-area-inset-bottom, 0px));
      z-index:10;
    
      width: var(--logo-size);
      height:auto;
    
      opacity:.88;
      pointer-events:none;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.16));
      transform: translate(0px, 0px) translateZ(0);
    }



    /* Clique invisível */
    .tap{
      position:absolute;
      left: var(--seal-x);
      top:  var(--seal-y);
      transform: translate(-50%, -50%);
      z-index:20;

      width: calc(var(--seal-size) * 1.75);
      height: calc(var(--seal-size) * 1.55);

      background: transparent;
      border:0;
      padding:0;
      cursor:pointer;
      -webkit-tap-highlight-color: transparent;
    }

    /* ✅ Animação rápida e suave */
    .opening .scene{ animation: openFast 780ms var(--ease) forwards; }
    @keyframes openFast{
      0%   { transform: translateZ(0) scale(1.02) translateY(0px); }
      55%  { transform: translateZ(0) scale(1.055) translateY(-6px); }
      100% { transform: translateZ(0) scale(1.075) translateY(-10px); }
    }

    .opening .flash{ animation: flashFast 780ms var(--ease) forwards; }
    @keyframes flashFast{
      0%{ opacity:0; }
      22%{ opacity:.55; }
      55%{ opacity:.18; }
      100%{ opacity:0; }
    }

    .fadeout{ animation: fadeout 420ms ease-out forwards; }
    @keyframes fadeout{ to{ opacity:0; } }

    @media (max-width: 360px){
      :root{
        --seal-size: min(40vw, 200px);
        --arc-drop: 48px;
        --logo-size: min(62vw, 380px);
        --logo-bottom: 40px;
        --logo-right: 10px;
      }
    }
  </style>
</head>

<body>
  <div class="stage" id="stage">

    <div class="scene" aria-hidden="true">
      <div class="bg"></div>
      <img class="arc" src="./abrir-convite.png" alt="" draggable="false" />
      <div class="soft"></div>
    </div>

    <div class="flash" aria-hidden="true"></div>

    <!-- ✅ versão PRETA -->
    <img class="logo" src="./inicial-preta.png" alt="" aria-hidden="true" draggable="false" />

    <button class="tap" id="tap" aria-label="Abrir convite"></button>
  </div>

  <script>
    (function(){
      const stage = document.getElementById('stage');
      const tap   = document.getElementById('tap');

      // Blindagem (dificulta)
      document.addEventListener('contextmenu', (e) => e.preventDefault());
      document.addEventListener('dragstart', (e) => e.preventDefault());
      document.addEventListener('selectstart', (e) => e.preventDefault());
      document.addEventListener('copy', (e) => e.preventDefault());
      document.addEventListener('gesturestart', (e) => e.preventDefault());
      document.addEventListener('touchstart', (e) => {
        if (e.touches && e.touches.length > 1) e.preventDefault();
      }, { passive:false });

      // preload/decoding
      const preload = (src) => {
        const i = new Image();
        i.src = src;
        return i.decode ? i.decode().catch(()=>{}) : Promise.resolve();
      };
      Promise.all([
        preload('./envelope.png'),
        preload('./abrir-convite.png'),
        preload('./inicial-preta.png')
      ]).catch(()=>{});

      let lock = false;
      function go(){
        if(lock) return;
        lock = true;

        stage.classList.add('opening');

        // openFast 780ms
        setTimeout(() => stage.classList.add('fadeout'), 820);
        setTimeout(() => location.href = 'convite.html', 1040);
      }

      tap.addEventListener('click', go);
      tap.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          go();
        }
      });
    })();
  </script>
</body>
</html>



