<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Abrir Convite</title>

  <style>
    :root{
      /* POSIÇÃO DO SELO (ajuste fino) */
      --seal-x: 55%;
      --seal-y: 55%;

      /* TAMANHO do conjunto (selo + arco) */
      --seal-size: min(36vw, 190px);

      /* PNG do arco: distância para baixo do selo */
      --arc-drop: 46px;

      /* LOGO maior */
      --logo-size: min(42vw, 240px);

      --ease: cubic-bezier(.22,1,.2,1); /* mais “orgânico” */
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      overflow:hidden;
      background:#f3eee7;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      touch-action: manipulation;
    }

    .stage{
      position:relative;
      width:100vw;
      height:100vh;
      opacity:1;
    }

    /* FUNDO FULL MOBILE */
    .bg{
      position:absolute;
      inset:0;
      background: url("./envelope.png") center/cover no-repeat;
      transform: scale(1.01);
      will-change: transform, filter;
      z-index:1;
    }

    /* acabamento leve */
    .soft{
      position:absolute;
      inset:0;
      pointer-events:none;
      background:
        radial-gradient(900px 700px at 50% 30%, rgba(255,255,255,.12), rgba(255,255,255,0) 60%),
        linear-gradient(to bottom, rgba(0,0,0,.05), rgba(0,0,0,.10));
      opacity:.45;
      z-index:2;
    }

    /* Efeito flash suave */
    .flash{
      position:absolute;
      inset:0;
      pointer-events:none;
      background: radial-gradient(900px 700px at 50% 65%, rgba(255,255,255,.45), rgba(255,255,255,0) 60%);
      opacity:0;
      z-index:3;
    }

    /* CAMADA DO ARCO */
    .arc{
      position:absolute;
      left: var(--seal-x);
      top:  var(--seal-y);
      transform: translate(-50%, -50%) translateY(var(--arc-drop)) scale(1);
      z-index:6;
      width: calc(var(--seal-size) * 1.65);
      max-width: 420px;
      height: auto;
      pointer-events:none;
      user-select:none;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.10));
      opacity: .98;
      will-change: transform, opacity, filter;
    }

    /* Área clicável invisível */
    .tap{
      position:absolute;
      left: var(--seal-x);
      top:  var(--seal-y);
      transform: translate(-50%, -50%);
      z-index:7;
      width: calc(var(--seal-size) * 1.75);
      height: calc(var(--seal-size) * 1.55);
      background: transparent;
      border: 0;
      padding: 0;
      cursor: pointer;
      -webkit-tap-highlight-color: transparent;
    }

    /* LOGO (bem maior) */
    .logo{
      position:absolute;
      right: 10px;
      bottom: 10px;
      z-index:8;
      width: var(--logo-size);
      max-width: 300px;
      height: auto;
      opacity: .92;
      pointer-events:none;
      user-select:none;
      filter: drop-shadow(0 14px 24px rgba(0,0,0,.14));
    }

    /* ANIMAÇÃO FUNDO */
    .opening .bg{
      animation: openZoom 1050ms var(--ease) forwards;
    }
    @keyframes openZoom{
      0%   { transform: scale(1.01); filter: blur(0px); }
      60%  { transform: scale(1.055) translateY(-9px); filter: blur(.25px); }
      100% { transform: scale(1.07) translateY(-12px); filter: blur(.5px); }
    }

    /* flash mais “macio” */
    .opening .flash{
      animation: flash 1050ms var(--ease) forwards;
    }
    @keyframes flash{
      0%{ opacity:0; }
      22%{ opacity:.55; }
      55%{ opacity:.20; }
      100%{ opacity:0; }
    }

    /* ✅ ARC mais suave: segura, respira, sobe um tiquinho, desfoca e some no fim */
    .opening .arc{
      animation: arcSmooth 1050ms var(--ease) forwards;
    }
    @keyframes arcSmooth{
      0%{
        opacity:.98;
        transform: translate(-50%,-50%) translateY(var(--arc-drop)) scale(1);
        filter: drop-shadow(0 10px 18px rgba(0,0,0,.10)) blur(0px);
      }
      55%{
        opacity:.98; /* segura visível (sem sumir cedo) */
        transform: translate(-50%,-50%) translateY(var(--arc-drop)) scale(1.01);
        filter: drop-shadow(0 10px 18px rgba(0,0,0,.10)) blur(0px);
      }
      80%{
        opacity:.70;
        transform: translate(-50%,-50%) translateY(calc(var(--arc-drop) - 6px)) scale(1.03);
        filter: drop-shadow(0 10px 18px rgba(0,0,0,.08)) blur(.3px);
      }
      100%{
        opacity:0;
        transform: translate(-50%,-50%) translateY(calc(var(--arc-drop) - 10px)) scale(1.04);
        filter: drop-shadow(0 10px 18px rgba(0,0,0,.05)) blur(.6px);
      }
    }

    /* Fade final (só depois de tudo) */
    .fadeout{ animation: fadeout 520ms ease-out forwards; }
    @keyframes fadeout{ to{ opacity:0; } }

    @media (max-width: 360px){
      :root{
        --seal-size: min(40vw, 200px);
        --arc-drop: 48px;
        --logo-size: min(50vw, 260px);
      }
      .logo{ right: 8px; bottom: 8px; }
    }
  </style>
</head>

<body>
  <div class="stage" id="stage">
    <div class="bg" aria-hidden="true"></div>
    <div class="soft" aria-hidden="true"></div>
    <div class="flash" aria-hidden="true"></div>

    <img class="arc" id="arc" src="./abrir-convite.png" alt="" aria-hidden="true" />
    <img class="logo" src="./inicial.png" alt="" aria-hidden="true" />

    <button class="tap" id="tap" aria-label="Abrir convite"></button>
  </div>

  <script>
    (function(){
      const stage = document.getElementById('stage');
      const tap   = document.getElementById('tap');
      const arc   = document.getElementById('arc');
      let lock = false;

      // ✅ evita “pulo” em alguns celulares: garante que o PNG já foi decodado
      if (arc && arc.decode) { arc.decode().catch(()=>{}); }

      function go(){
        if(lock) return;
        lock = true;

        stage.classList.add('opening');

        // animações: 1050ms
        setTimeout(() => stage.classList.add('fadeout'), 1120);
        setTimeout(() => location.href = 'convite.html', 1360);
      }

      tap.addEventListener('click', go);
      tap.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          go();
        }
      });
    })();
  </script>
</body>
</html>

